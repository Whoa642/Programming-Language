객체 지향 프로그램의 기반이 되는 기술로 상속은 유지 보수, 프로그램을 수정, 새로운 내용을 추가하는 것을 유연하게 해준다. 자식 클래스가 부모 클래스를 상속받으면 자식은 부모의 멤버 변수와 메서드 사용 할 수 있다. 상속을 하려면 extends 예약어 사용한다. 부모 클래스와 자식 클래스의 관계는 전자는 일반적이고 후자는 구체적이다.

protected를 사용하면 외부 클래스에서 사용할 수 없는 상위 클래스의 변수와 메서드를 하위 클래스에서 사용할 수 있도록 지정하는 예약어, protected 예약어로 선언한 변수를 외부 클래스가 사용하려면 private 변수처럼 get(),set() 메서드를 사용해야 한다.

부모 클래스를 상속받은 자식 클래스가 생성될 때 반드시 부모 클래스의 생성자가 먼저 호출되고 부모 클래스 생성자가 호출될 때 부모 클래스의 멤버 변수가 메모리에 생성된다.

자식 클래스는 부모 클래스의 참조 값(주소)을 알고 있는데 이 참조 값을 가지는 예약어가 super(this가 자기 자신의 참조 값을 가지고 있는 것과 같다.) 부모 클래스의 생성자가 호출되면 자식 클래스 생성자에서 super()를 자동으로 호출하는데 super()는 부모 클래스의 디폴트 생성자를 자동으로 호출한다.

만약 자식 클래스에서 부모 클래스의 매개변수를 지정하고 싶으면 부모 클래스의 생성자 중에서 매개변수를 가지는 생성자를 정의하고 자식 클래스에서 생성자에서 super(인자)를 추가한다.(매개변수를 가지는 부모 클래스 생성자를 호출한다.)

부모 클래스에 선언된 멤버 변수와 메서드를 자식 클래스에서 참조할 때도 super를 사용(이 역시 this가 자신의 멤버 변수와 메서드에 접근했던 것과 같다.)

모든 자식 클래스는 부모 클래스 자료형으로 형 변환 가능하지만 그 역은 성립 하지 않는다. 이를 업캐스팅이라 하는데 자식 클래스를 부모 클래스의 부분집합으로 생각하면 왜 부모 클래스에서 자식 클래스로 형 변환이 불가능한지 쉽게 이해된다.

부모 클래스 A = new 자식 클래스()와 같이 형 변환이 이루어지면 A는 부모 클래스의 멤버 변수와 메서드만 접근 가능하다.

메서드 오버라이딩은 부모클래스에 정의한 메서드를 자식 클래스에서 재정의하는 것으로 오버라이딩을 하려면 반환형,메서드 이름,매개변수 개수와 자료형이 반드시 같아야 한다.

@Override 애노테이션은 메서드가 재정의된 매서드라고 컴파일러에 알려 주는 역할을 한다.
애노테이션은 컴파일러에게 특정한 정보를 제공해 주는 역할을 하는데 Override 외에도 여러 개의 애노테이션이 있다.

상속에서 부모와 자식 클래스에 같은 이름의 메서드가 존재할 때 호출되는 메서드는 인스턴스에 따라 결정된다. 선언한 클래스형이 아닌 생성된 인스턴스의 메서드를 호출하는데 이 기술을 가상 메서드라고 한다.

클래스에서 멤버 변수가 사용하는 메모리와 멤버 메서드가 사용하는 메모리는 다른데 전자는 인스턴스가 생성될 때마다 힙 영역에 새로 생성되지만, 메서드는 실행해야 할 명령 집합으로 코드 영역에 생성되고 인스턴스가 생성될 때마다 생성되지 않는다. 

가상 메서드의 경우 가상 메서드 테이블이 만들어지는데 가상 메서드 테이블은 각 메서드 이름과 실제 메모리 주소가 짝을 이루고 있다. 어떤 메서드가 호출되면 이 테이블에서 주소 값을 찾아서 해당 메서드의 명령을 수행한다. 재정의된 메서드는 실제 인스턴스에 해당하는 메서드가 호출된다. 그렇지 않으면 메서드 주소가 같기 때문에 부모 클래스의 메서드를 호출한다.

부모 클래스에서 선언한 메서드를 자식 클래스에서 재정의한 상태에서 자식 클래스 인스턴스가 부모 클래스로 형 변환되고 재정의된 메서드를 호출할 경우, 참조 변수의 자료형의 메서드가 호출되는 것이 아니라 생성된 인스턴스의 메서드가 호출된다. 이를 가상 메서드라고 하며 자바의 모든 메서드는 가상 메서드(C++의 경우 가상 함수를 사용하려면 virtual을 반드시 사용해야 하는데 자바는 모든 멤버 함수가 가상 함수가 자바의 가상 함수 테이블은 vfptr도 없고 여러모로 C++에 비해서 간단한 것 같다.)

다형성은 하나의 코드가 여러 자료형으로 구현되어 실행되는 것을 의미하며 추상 클래스,인터페이스에서 구현되며 자바 기반의 프레임워크에서 응용할 수 있다. 다형성의 기반은 암시적 클래스 형 변환과 가상 메서드

다형성을 활용하면 자식 클래스에서 부모 클래스에서 상속 받은 공통 부분의 메서드를 기반으로 추가 기능을 구현할 수 있고 코드 양도 줄어들고 유지 보수도 편리하다. 따라서 다형성을 잘 활용하면 유연하면서 구조화된 코드를 구현하여 확장성 있고 유지 보수하기 좋은 프로그램을 개발할 수 있다.

상속은 IS-관계(is a relatoinship, inheritance)에서 사용하는 것이 가장 효율적이다. IS-A 관계는 일반적인 개념과 구체적인 개념의 관계로 일반적인 개념을 구체화하는 상황에서 상속을 사용해야 한다. 하지만 관계가 없는 클래스 사이에서 사용하면 클래스 간의 결합도가 높아져서 부모 클래스의 변화가 자식 클래스에 미치는 영항이 크기 때문에 상속을 하면 안된다. 이와 달리 HAS-관계(has a relationship, association)은 한 클래스가 다른 클래스를 소유한 관계이다. 자바는 다중 상속을 허용하지 않아서 extends 뒤에는 반드시 한 개의 클래스가 온다.(근데 내가 읽은 책에서는 자바는 다중 상속을 제대로 하기 위해서 인터페이스를 만들었다고 한다.) 

자식 클래스에서 부모 클래스로 형 변환되면 부모 클래스에서 선언한 메서드와 멤버 변수만 사용 가능하다. 필요에 따라 다시 원래 인스턴스의 자료형으로 되돌아가야 하는 경우가 있을 수 있다. 이때 사용하는 것이 다운 캐스팅이다. 다운 캐스팅은 부모 클래스로 형 변환되었던 자식 클래스를 다시 원래 자료형으로 형 변환하는 것을 의미한다.

다운 캐스팅을 하기 전에 부모 클래스로 형 변환된 인스턴스의 원래 자료형을 확인해야 변환할 때 오류를 막을 수 있다. 이 때 확인하는 예약어가 instanceof(하지 않으면 오류가 발생할 수 있다.) 주의할 점은 부모 클래스로 암시적으로 형 변환이 되지만 자식 클래스로 형 변환할 때는 반드시 명시적으로 해야한다.

나 혼자 코딩!, 연습문제가 평이해서 따로 올릴 만한 코드가 없다.
